{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <h2 class="card-title mb-2" style="font-weight:600;">{% block title %}Pick your meals{% endblock %}</h2>
                <p class="text-muted small mb-3">Search or pick multiple recipes below. Your selection will update the combined shopping list.</p>

                <form method="post">
                    <div class="form-group">
                        <label for="recipes-select" class="sr-only">Recipes</label>
                        <select id="recipes-select" name="recipes" class="form-control" multiple>
                            {% for recipe in recipes %}
                                {% if recipe.selected %}
                                    <option value="{{ recipe.name }}" selected>{{ recipe.name }}</option>
                                {% else %}
                                    <option value="{{ recipe.name }}">{{ recipe.name }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <button class="btn btn-primary" name="submit_button" value="submit_button" type="submit">Update selection</button>
                        <button class="btn btn-danger btn-sm" name="submit_button" value="remove_button" type="submit">Uncheck all</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    $('#recipes-select').select2({
        placeholder: "Search and select recipes",
        allowClear: true
    });
});
</script>
    
{% endblock %}